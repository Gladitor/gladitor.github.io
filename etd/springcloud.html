<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SpringCloud | Jiay</title>
    <meta name="description" content="åƒé‡Œä¹‹è¡Œå§‹äºè¶³ä¸‹">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.7be88f66.css" as="style"><link rel="preload" href="/assets/js/app.2dabfd5d.js" as="script"><link rel="preload" href="/assets/js/2.00c0ffb2.js" as="script"><link rel="preload" href="/assets/js/4.7b0110c2.js" as="script"><link rel="preload" href="/assets/js/19.8e3af826.js" as="script"><link rel="prefetch" href="/assets/js/10.0bc584ce.js"><link rel="prefetch" href="/assets/js/11.d33b5700.js"><link rel="prefetch" href="/assets/js/12.0cd56aa5.js"><link rel="prefetch" href="/assets/js/13.40775833.js"><link rel="prefetch" href="/assets/js/14.4d57064e.js"><link rel="prefetch" href="/assets/js/15.94163f20.js"><link rel="prefetch" href="/assets/js/16.fe1c6d5a.js"><link rel="prefetch" href="/assets/js/17.ab8012be.js"><link rel="prefetch" href="/assets/js/18.52e0baa4.js"><link rel="prefetch" href="/assets/js/20.8441fed2.js"><link rel="prefetch" href="/assets/js/21.6679fe29.js"><link rel="prefetch" href="/assets/js/22.e9bb5469.js"><link rel="prefetch" href="/assets/js/23.8663477c.js"><link rel="prefetch" href="/assets/js/24.428ea22d.js"><link rel="prefetch" href="/assets/js/25.b7fefe1f.js"><link rel="prefetch" href="/assets/js/26.501bc341.js"><link rel="prefetch" href="/assets/js/27.6905787f.js"><link rel="prefetch" href="/assets/js/28.07fa8e91.js"><link rel="prefetch" href="/assets/js/29.ce718bcb.js"><link rel="prefetch" href="/assets/js/3.fde5b4c9.js"><link rel="prefetch" href="/assets/js/30.b9d0669b.js"><link rel="prefetch" href="/assets/js/31.a05ad476.js"><link rel="prefetch" href="/assets/js/32.e6b55a02.js"><link rel="prefetch" href="/assets/js/33.90aa392e.js"><link rel="prefetch" href="/assets/js/34.c9c092a9.js"><link rel="prefetch" href="/assets/js/35.8b09f6e5.js"><link rel="prefetch" href="/assets/js/36.492bcc32.js"><link rel="prefetch" href="/assets/js/37.092121ca.js"><link rel="prefetch" href="/assets/js/38.47905322.js"><link rel="prefetch" href="/assets/js/39.d5a871ca.js"><link rel="prefetch" href="/assets/js/40.6ae86537.js"><link rel="prefetch" href="/assets/js/5.03f19552.js"><link rel="prefetch" href="/assets/js/6.d1de1f89.js"><link rel="prefetch" href="/assets/js/7.3097b3e4.js"><link rel="prefetch" href="/assets/js/8.01e2204f.js"><link rel="prefetch" href="/assets/js/9.457ae236.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7be88f66.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Jiay</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/about/" class="sidebar-link">about</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>iot</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>exp</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>etd</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/etd/springcloud.html" class="active sidebar-link">SpringCloud</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/etd/springcloud.html#åŸºäºspringcloudçš„æƒé™æ¡†æ¶" class="sidebar-link">åŸºäºspringcloudçš„æƒé™æ¡†æ¶</a></li><li class="sidebar-sub-header"><a href="/etd/springcloud.html#spring-boot-åŸºç¡€" class="sidebar-link">spring boot åŸºç¡€</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/etd/springcloud.html#å¼€å§‹" class="sidebar-link">å¼€å§‹</a></li><li class="sidebar-sub-header"><a href="/etd/springcloud.html#sbé…ç½®" class="sidebar-link">sbé…ç½®</a></li><li class="sidebar-sub-header"><a href="/etd/springcloud.html#æ‰“åŒ…" class="sidebar-link">æ‰“åŒ…</a></li></ul></li><li class="sidebar-sub-header"><a href="/etd/springcloud.html#spring-boot-è¿›é˜¶" class="sidebar-link">spring boot è¿›é˜¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/etd/springcloud.html#properties-ymlæ–‡ä»¶" class="sidebar-link">properties/ymlæ–‡ä»¶</a></li><li class="sidebar-sub-header"><a href="/etd/springcloud.html#å¤šç¯å¢ƒé…ç½®" class="sidebar-link">å¤šç¯å¢ƒé…ç½®</a></li><li class="sidebar-sub-header"><a href="/etd/springcloud.html#æ³¨è§£" class="sidebar-link">æ³¨è§£</a></li><li class="sidebar-sub-header"><a href="/etd/springcloud.html#æ‹¦æˆªå™¨" class="sidebar-link">æ‹¦æˆªå™¨</a></li><li class="sidebar-sub-header"><a href="/etd/springcloud.html#å¼‚å¸¸å¤„ç†" class="sidebar-link">å¼‚å¸¸å¤„ç†</a></li></ul></li></ul></li><li><a href="/etd/java/passbyvalue.html" class="sidebar-link">å…³äºjavaä¸­åªæœ‰å€¼ä¼ é€’çš„æ€è€ƒ</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>issues</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>life</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="springcloud"><a href="#springcloud" aria-hidden="true" class="header-anchor">#</a> SpringCloud</h1> <h2 id="åŸºäºspringcloudçš„æƒé™æ¡†æ¶"><a href="#åŸºäºspringcloudçš„æƒé™æ¡†æ¶" aria-hidden="true" class="header-anchor">#</a> åŸºäºspringcloudçš„æƒé™æ¡†æ¶</h2> <p>å…ˆæ¥ä¸ªå½©è›‹~æœ¬äººæ­å»ºçš„æƒé™æ¡†æ¶ï¼Œæ”¯æŒåº”ç”¨å†…æƒé™éªŒè¯ã€OAuth2ã€‚æ¬¢è¿æ¥è¸©ï¼Œå¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰æ‰€ç›ŠåŠ©ã€‚ğŸ¤Staré¼“åŠ±ä¸€ä¸‹~~ã€‚<br> <a href="https://github.com/Gladitor/springcloudarchitect" target="_blank" rel="noopener noreferrer">ä»£ç åœ°å€<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="spring-boot-åŸºç¡€"><a href="#spring-boot-åŸºç¡€" aria-hidden="true" class="header-anchor">#</a> spring boot åŸºç¡€</h2> <p>ä¹‹å‰æœ‰springMVCçš„ä½¿ç”¨ç»å†ï¼Œå¾ˆå¤šåœ°æ–¹æ˜¯è·ŸspringMVCå¯¹æ¯”çš„è§’åº¦å™è¿°çš„ï¼Œæœ‰springMVCçš„ç»éªŒä¼šæ›´å¥½ç†è§£ã€‚</p> <h3 id="å¼€å§‹"><a href="#å¼€å§‹" aria-hidden="true" class="header-anchor">#</a> å¼€å§‹</h3> <p>åˆ›å»ºmavené¡¹ç›®ï¼Œæ›´æ”¹build path,å»é™¤é”™è¯¯æç¤º<br> <img src="/assets/img/bp.752abb96.png" alt="bp"><br>
é…ç½®sb(spring bootåæ–‡ç»Ÿç§°sb)ä¾èµ–<br> <img src="/assets/img/depend.ae06b726.png" alt="depend"><br>
æ›´æ”¹Appç±»å¦‚ç¬¬ä¸€å¼ å›¾ï¼Œæ‰§è¡Œmainæ–¹æ³•ï¼Œsbä¼šå¯åŠ¨è‡ªå¸¦çš„tomcatå®¹å™¨ï¼Œå¯åŠ¨æˆåŠŸï¼Œæµè§ˆå™¨è®¿é—®<br> <img src="/assets/img/start.77bdbb7a.png" alt="start"><br>
ä¸ç”¨é…ç½®ä»»ä½•é…ç½®æ–‡ä»¶ï¼Œä¹Ÿä¸ç”¨æ˜¾ç¤ºçš„ä½¿ç”¨ä»»ä½•å®¹å™¨å°±å¯ä»¥å¯åŠ¨ï¼Œæ¯”ä»¥å¾€springçš„ä½¿ç”¨æ–¹ä¾¿çš„å¤š</p> <h3 id="sbé…ç½®"><a href="#sbé…ç½®" aria-hidden="true" class="header-anchor">#</a> sbé…ç½®</h3> <p>æ•´ä¸ªsbåº”ç”¨ç¨‹åºåªæœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶.propertiesæˆ–.ymlï¼Œä»¥.propertiesä¸ºä¾‹é‡å†™é»˜è®¤é…ç½®ï¼Œé…ç½®æ–‡ä»¶åå­—å¿…é¡»æ˜¯application<br> <img src="/assets/img/prop.205d907e.png" alt="prop"><br>
é‡æ–°å¯åŠ¨ï¼Œæµè§ˆå™¨è®¿é—®localhost:8088/api/hello<br> <img src="/assets/img/hello.a4b4d5ee.png" alt="hello"></p> <h3 id="æ‰“åŒ…"><a href="#æ‰“åŒ…" aria-hidden="true" class="header-anchor">#</a> æ‰“åŒ…</h3> <p>sbå¯ä»¥æ‰“åŒ…æˆwarå’Œjar,å‰åç«¯åˆ†ç¦»çš„é¡¹ç›®é€‚åˆæ‰“æˆjarï¼Œè‹¥ä¸åˆ†ç¦»åˆ™warè¾ƒå¥½</p> <ul><li>waræ–¹å¼<br>
1.ä¿®æ”¹packaging<br> <code>&lt;packaging&gt;war&lt;/packaging&gt;</code><br>
2.æ·»åŠ build</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;build&gt;
  &lt;finalName&gt;test&lt;/finalName&gt;
  &lt;resources&gt;
    &lt;resource&gt;
      &lt;directory&gt;src/main/resources&lt;/directory&gt;
      &lt;filtering&gt;true&lt;/filtering&gt;
    &lt;/resource&gt;
  &lt;/resources&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
    &lt;/plugin&gt;
    &lt;plugin&gt;
      &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;
      &lt;version&gt;2.5&lt;/version&gt;
      &lt;configuration&gt;&lt;encoding&gt;UTF-8&lt;/encoding&gt;&lt;/configuration&gt;
    &lt;/plugin&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
      &lt;version&gt;2.18.1&lt;/version&gt;
      &lt;configuration&gt;&lt;skipTests&gt;true&lt;/skipTests&gt;&lt;/configuration&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;
</code></pre></div><p>3.mvn packageå°±ä¼šç”Ÿæˆtest.waråŒ…<br> <img src="/assets/img/package1.d180feb4.png" alt="package1"><br>
æŠŠwaråŒ…æ”¾åˆ°tomcatä¸‹å¯åŠ¨<br> <img src="/assets/img/error1.8881a073.png" alt="error1"><br>
testå¯åŠ¨å¤±è´¥,å› ä¸ºsbå†…åµŒäº†t8ï¼Œä¸t7å†²çª<br>
æ’é™¤Springbootä¸­çš„tomcatç›¸å…³ä¾èµ–ï¼Œè®°å¾—æ·»åŠ ä½œç”¨åŸŸä¸ºprovidedçš„servlet-api<br> <img src="/assets/img/depex.eeaf9cb4.png" alt="depex"><br>
ä¿®æ”¹appç±»ï¼Œç»§æ‰¿SpringBootServletInitializerï¼Œé‡å†™configure<br> <img src="/assets/img/sbsi.27957a06.png" alt="SpringBootServletInitializer"><br>
é‡æ–°æ‰“åŒ…mvn clean package
å¯åŠ¨tomcatè¿˜æ˜¯æŠ¥é”™error creating bean with name 'defaultvalidator' defined in class path resourceï¼ŒæŸ¥è¯¢èµ„æ–™å‘ç°æ˜¯tomcatç‰ˆæœ¬éœ€è¦8ä»¥ä¸Šï¼Œæ›´æ¢tomcat8åä¸åœ¨æŠ¥é”™ï¼Œæµè§ˆå™¨æ­£å¸¸è®¿é—®<br> <img src="/assets/img/repT8.d82e6ffc.png" alt="repT8"><br> <em>æ³¨æ„ï¼šè®¿é—®ç«¯å£åˆæˆäº†é»˜è®¤8080ï¼Œè·¯å¾„testè€Œä¸æ˜¯å‰é¢çš„apiï¼Œé…ç½®å¤–éƒ¨tomcatåapplication.propertiesçš„é…ç½®å¤±æ•ˆ</em></p> <ul><li>jaræ–¹å¼<br>
1.å»æ‰å¤–éƒ¨tomcaté…ç½®<br> <img src="/assets/img/ex_dis.d60a8cee.png" alt="ex_dis"><br>
2.ä¿®æ”¹packaging<br> <code>&lt;packaging&gt;jar&lt;/packaging&gt;</code><br>
3.æ·»åŠ build</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;build&gt;
    &lt;finalName&gt;api&lt;/finalName&gt;
    &lt;resources&gt;
      &lt;resource&gt;
        &lt;directory&gt;src/main/resources&lt;/directory&gt;
        &lt;filtering&gt;true&lt;/filtering&gt;
      &lt;/resource&gt;
    &lt;/resources&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
        &lt;configuration&gt;
          &lt;fork&gt;true&lt;/fork&gt;
          &lt;mainClass&gt;test.App&lt;/mainClass&gt;
        &lt;/configuration&gt;
        &lt;executions&gt;
          &lt;execution&gt;&lt;goals&gt;&lt;goal&gt;repackage&lt;/goal&gt;&lt;/goals&gt;&lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;
      &lt;plugin&gt;
        &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;
        &lt;version&gt;2.5&lt;/version&gt;
        &lt;configuration&gt;
          &lt;encoding&gt;UTF-8&lt;/encoding&gt;
          &lt;useDefaultDelimiters&gt;true&lt;/useDefaultDelimiters&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
        &lt;version&gt;2.18.1&lt;/version&gt;
        &lt;configuration&gt;&lt;skipTests&gt;true&lt;/skipTests&gt;&lt;/configuration&gt;
      &lt;/plugin&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
        &lt;version&gt;2.3.2&lt;/version&gt;
        &lt;configuration&gt;
          &lt;source&gt;1.8&lt;/source&gt;
          &lt;target&gt;1.8&lt;/target&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;
</code></pre></div><p>4.mvn clean package<br>
java -jar api.jarå¯åŠ¨<br>
è®¿é—®localhost:8088/api/helloæˆåŠŸ</p> <h2 id="spring-boot-è¿›é˜¶"><a href="#spring-boot-è¿›é˜¶" aria-hidden="true" class="header-anchor">#</a> spring boot è¿›é˜¶</h2> <p>è¯»åˆ°è¿™ç›¸ä¿¡ä½ å·²ç»å‘ç°sbçš„å¥½å¤„ï¼Œä»£ç ç®€æ´ã€ç»“æ„æ¸…æ™°ï¼Œå‰é¢æ˜¯åˆæ­¥ä»‹ç»sbï¼Œä¸‹é¢å¼€å§‹æ·±å…¥äº†è§£sbã€‚</p> <h3 id="properties-ymlæ–‡ä»¶"><a href="#properties-ymlæ–‡ä»¶" aria-hidden="true" class="header-anchor">#</a> properties/ymlæ–‡ä»¶</h3> <p>ä¸‹é¢ä»¥propertiesä¸ºä¾‹åˆ—å‡ºsbå¸¸ç”¨é…ç½®</p> <table><thead><tr><th>é…ç½®é¡¹</th> <th>è¯´æ˜</th> <th>ä¸¾ä¾‹</th></tr></thead> <tbody><tr><td>server.port</td> <td>æœåŠ¡ç«¯å£</td> <td>server.port=8088</td></tr> <tr><td>server.context-path</td> <td>åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡</td> <td>server.context-path=/api,åˆ™è®¿é—®åœ°å€ä¸ºï¼šhttp://ip:port/api</td></tr> <tr><td>spring.jpa.database</td> <td>æ•°æ®åº“ç±»å‹</td> <td>spring.jpa.database=MYSQLÂ Â <a href="#jpa">JPA &amp; Spring Data JPA</a></td></tr> <tr><td>spring.jpa.properties.hibernate.dialect</td> <td>hqlæ–¹è¨€</td> <td>spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect</td></tr> <tr><td>spring.jpa.showSql</td> <td>æ˜¯å¦æ‰“å°sqlè¯­å¥</td> <td>spring.jpa.showSql=true</td></tr> <tr><td>spring.datasource.url</td> <td>æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²</td> <td>spring.datasource.url=jdbc:mysql://localhost:3306/database?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=true</td></tr> <tr><td>spring.datasource.username</td> <td>æ•°æ®åº“ç”¨æˆ·å</td> <td>spring.datasource.username=root</td></tr> <tr><td>spring.datasource.password</td> <td>æ•°æ®åº“å¯†ç </td> <td>spring.datasource.password=root</td></tr> <tr><td>spring.datasource.driverClassName</td> <td>æ•°æ®åº“é©±åŠ¨</td> <td>spring.datasource.driverClassName=com.mysql.jdbc.Driver</td></tr> <tr><td>spring.http.multipart.maxFileSize</td> <td>æœ€å¤§æ–‡ä»¶ä¸Šä¼ å¤§å°,-1ä¸ºä¸é™åˆ¶</td> <td>spring.http.multipart.maxFileSize=-1</td></tr></tbody></table> <h3 id="å¤šç¯å¢ƒé…ç½®"><a href="#å¤šç¯å¢ƒé…ç½®" aria-hidden="true" class="header-anchor">#</a> å¤šç¯å¢ƒé…ç½®</h3> <p>é€šå¸¸åº”ç”¨ç³»ç»Ÿå¼€å‘è¿‡ç¨‹ä¸­ç»å†å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ä¸‰ä¸ªé˜¶æ®µï¼Œä¸åŒé˜¶æ®µçš„ç¯å¢ƒé…ç½®å¾€å¾€ä¸åŒï¼Œæ‰“åŒ…çš„æ—¶å€™å†æ›´æ”¹é…ç½®æ–‡ä»¶å¤ªä¸æ–¹ä¾¿ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥é‡‡ç”¨å¤šç¯å¢ƒé…ç½®ã€‚<br>
1.é¦–å…ˆåˆ›å»ºå¤šç¯å¢ƒé…ç½®æ–‡ä»¶ï¼Œapplication-dev.properties(yml),application-test.properties,application-dep.properties,å¯¹åº”ä¸‰ä¸ªé˜¶æ®µï¼Œåœ¨å„ä¸ªæ–‡ä»¶ä¸­æ·»åŠ å„è‡ªçš„ç¯å¢ƒé…ç½®ä¿¡æ¯ã€‚<br>
2.æ›´æ”¹é»˜è®¤é…ç½®æ–‡ä»¶,æ·»åŠ <code>spring.profiles.active=dev</code>,æŒ‡å®šå½“å‰é¡¹ç›®æ‰“åŒ…é…ç½®ä¸ºdevï¼Œ<code>spring.profiles.active=dep</code>åˆ™æ‰“åŒ…é…ç½®ä¸ºdepã€‚<br>
3.è¿è¡Œï¼š<code>java -jar api.jar</code><br> <img src="/assets/img/multien.39e36490.png" alt="multien"></p> <h3 id="æ³¨è§£"><a href="#æ³¨è§£" aria-hidden="true" class="header-anchor">#</a> æ³¨è§£</h3> <p>sbä¸»è¦é‡‡ç”¨æ³¨è§£çš„æ–¹å¼ï¼Œä¸‹é¢è¯¦ç»†ä»‹ç»é¡¹ç›®ä¸­å¸¸ç”¨æ³¨è§£ã€‚</p> <ul><li>@SpringBootApplication<br>
æ ‡è¯†ç¨‹åºå¯åŠ¨mainæ–¹æ³•ï¼Œä¸åŠ è¿™ä¸ªæ³¨è§£ç¨‹åºæ— æ³•å¯åŠ¨ã€‚SpringBootApplicationç±»ä¸Šæœ‰ä¸‰ä¸ªæ³¨è§£ï¼Œ@SpringBootConfigurationè¡¨ç¤ºé…ç½®æ³¨è§£ï¼Œ@EnableAutoConfigurationè¡¨ç¤ºè‡ªåŠ¨é…ç½®ï¼Œ@ComponentScanè¡¨ç¤ºæ‰«æBeançš„è§„åˆ™,@SpringBootApplicationä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ä¸‰ä¸ªä»£æ›¿ã€‚</li> <li>@Value<br>
å®šä¹‰å…¨å±€å˜é‡ï¼Œç›¸å½“äºä»¥å¾€public staticå£°æ˜å˜é‡ã€‚å¯ä»¥æŠŠå…¨å±€å˜é‡å­˜å‚¨åœ¨é…ç½®æ–‡ä»¶ä¸­é€šè¿‡@Valueå–å‡º<br>
application.propertiesä¸­æ·»åŠ è‡ªå®šä¹‰å˜é‡<code>server.custompara=cpara</code>ï¼Œå¦‚ä¸‹ä»£ç åˆ™å¯ä»¥å–å‡ºcpara</li></ul> <div class="language- extra-class"><pre class="language-text"><code>@Value(&quot;${server.custompara}&quot;)
String custompara;
    
@RequestMapping(&quot;getcustompara&quot;)
String getCustomPara(){
  	return custompara;
}
</code></pre></div><p><img src="/assets/img/custompara.3116c16d.png" alt="custompara"></p> <ul><li>@Bean<br>
å®šä¹‰ä¸€ä¸ªBeanï¼Œä¸»è¦ç”¨åœ¨@Configurationå’Œ@SpringBootConfigurationæ³¨è§£çš„ç±»æˆ–@Componentæ³¨è§£çš„ç±»ã€‚<br>
ä»¥æ·˜å®å·¥å…·æ¥å£å‚æ•°é…ç½®ä¸ºä¾‹ï¼Œé…ç½®æ–‡ä»¶ä¸­toolappkey,toolsecret,toolurlå¦‚ä¸‹å›¾ï¼š<br> <img src="/assets/img/classano1.cdd81b1b.png" alt="classano1"><br>
å®šä¹‰Taobaotoolå‚æ•°ç±»</li></ul> <div class="language- extra-class"><pre class="language-text"><code>/**
 * @author JIAY
 * taobao tool
 */
public class Taobaotool {
    private String toolappkey;
    private String toolsecret;
    private String toolurl;
    
    public void setToolappkey(String toolappkey){
    	this.toolappkey = toolappkey;
    }
    
    public void setToolsecret(String toolsecret){
    	this.toolsecret = toolsecret;
    }
    
    public void setToolurl(String toolurl){
    	this.toolurl = toolurl;
    }
    
    public String getToolappkey(){
    	return toolappkey;
    }
    
    public String getToolsecret(){
    	return toolsecret;
    }
    
    public String getToolurl(){
    	return toolurl;
    }
}
</code></pre></div><p>é…ç½®ç±»åŠ è½½å‚æ•°</p> <div class="language- extra-class"><pre class="language-text"><code>@SpringBootConfiguration
public class ConfigurationAnimation {
    
	@Value(&quot;${toolappkey}&quot;)
	private String toolappkey;
	@Value(&quot;${toolsecret}&quot;)
	private String toolsecret;
	@Value(&quot;${toolurl}&quot;)
	private String toolurl;
	
	@Bean
	public Taobaotool taobaotool(){
		Taobaotool tbt = new Taobaotool();
		tbt.setToolappkey(toolappkey);
		tbt.setToolsecret(toolsecret);
		tbt.setToolurl(toolurl);
		return tbt;
	}
}
</code></pre></div><p>æ³¨å…¥Taobaotoolå¹¶è°ƒç”¨</p> <div class="language- extra-class"><pre class="language-text"><code>//æ³¨å…¥ç±»
@Autowired
private Taobaotool taobaotool;
   
@RequestMapping(&quot;gettaobaotool&quot;)
String getTaobaotool(){
	return taobaotool.getToolappkey() + &quot;,&quot; + taobaotool.getToolsecret() + &quot;,&quot; + taobaotool.getToolurl();
}
</code></pre></div><p>éªŒè¯ç»“æœ<br> <img src="/assets/img/classano2.1b636251.png" alt="classano2"></p> <h3 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" aria-hidden="true" class="header-anchor">#</a> æ‹¦æˆªå™¨</h3> <p>APIç»Ÿä¸€æ‹¦æˆªï¼Œå®‰å…¨æ ¡éªŒ<br>
åˆ›å»ºæ‹¦æˆªå™¨ç±»ï¼šApiInterceptorï¼Œå¹¶å®ç° HandlerInterceptor æ¥å£ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>public class ApiInterceptor implements HandlerInterceptor {
	//è¯·æ±‚ä¹‹å‰    
	@Override    
	public boolean preHandle(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o) throws Exception {        
	    System.out.println(&quot;è¿›å…¥æ‹¦æˆªå™¨&quot;);  
	    String sessionId = httpServletRequest.getParameter(&quot;sessionId&quot;);
		if(sessionId == null || sessionId.equals(&quot;&quot;)){
			String root = &quot;status:0,errmsg:nologin&quot;;
			PrintWriter out = httpServletResponse.getWriter();
			out.print(root);
			return false;
		}else{
			if(sessionId.equals(&quot;1234567&quot;)){
				//æ”¾è¡Œ
				return true;
			}else{
				return false;
			}
		}  
	}
	//è¯·æ±‚æ—¶    
	@Override    
	public void postHandle(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, ModelAndView modelAndView) throws Exception {    }    
	//è¯·æ±‚å®Œæˆ    
	@Override    
	public void afterCompletion(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, Exception e) throws Exception {    }
}
</code></pre></div><p>æ·»åŠ æ‹¦æˆªå™¨ï¼š@SpringBootConfigrationæ³¨è§£WebConfigç±»ï¼Œç»§æ‰¿WebMvcConfigurationSupportï¼Œé‡å†™addInterceptors</p> <div class="language- extra-class"><pre class="language-text"><code>@SpringBootConfiguration
public class WebConfig extends WebMvcConfigurationSupport {
	@Override
	protected void addInterceptors(InterceptorRegistry registry) {        
	    super.addInterceptors(registry);        
		registry.addInterceptor(new ApiInterceptor());    
	}
}
</code></pre></div><p>éªŒè¯ç»“æœ<br> <img src="/assets/img/interceptor.61aa5679.png" alt="interceptor"></p> <h3 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" aria-hidden="true" class="header-anchor">#</a> å¼‚å¸¸å¤„ç†</h3> <p>(<em>^_^</em>)</p> <p>æœªå®Œï¼Œå¾…ç»­ã€‚ã€‚<br> <span id="jpa">JPA &amp; Spring Data JPA</span><br>
JPAæ˜¯Java Persistence APIçš„ç®€ç§°ï¼Œä¸­æ–‡åJavaæŒä¹…å±‚APIï¼Œæ˜¯Sunå®˜æ–¹æå‡ºçš„JavaæŒä¹…åŒ–è§„èŒƒï¼Œå…¶è®¾è®¡ç›®æ ‡ä¸»è¦æ˜¯ä¸ºäº†ç®€åŒ–ç°æœ‰çš„æŒä¹…åŒ–å¼€å‘å·¥ä½œå’Œæ•´åˆORMæŠ€æœ¯ã€‚JPAä½¿ç”¨XMLæ–‡ä»¶æˆ–æ³¨è§£ï¼ˆJDK 5.0æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰æ¥æè¿°å¯¹è±¡-å…³è”è¡¨çš„æ˜ å°„å…³ç³»ï¼Œèƒ½å¤Ÿå°†è¿è¡ŒæœŸçš„å®ä½“å¯¹è±¡æŒä¹…åŒ–åˆ°æ•°æ®åº“ï¼Œå®ƒä¸ºJavaå¼€å‘äººå‘˜æä¾›äº†ä¸€ç§ORMå·¥å…·æ¥ç®¡ç†Javaåº”ç”¨ä¸­çš„å…³ç³»æ•°æ®ã€‚ ç®€å•åœ°è¯´ï¼ŒJPAå°±æ˜¯ä¸ºPOJOï¼ˆPlain Ordinary Java Objectï¼‰æä¾›æŒä¹…åŒ–çš„æ ‡å‡†è§„èŒƒï¼Œå³å°†Javaçš„æ™®é€šå¯¹è±¡é€šè¿‡å¯¹è±¡å…³ç³»æ˜ å°„ï¼ˆObject-Relational Mappingï¼ŒORMï¼‰æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­ã€‚ç”±äºJPAæ˜¯åœ¨å……åˆ†å¸æ”¶äº†ç°æœ‰Hibernateï¼ŒTopLinkï¼ŒJDOç­‰ORMæ¡†æ¶çš„åŸºç¡€ä¸Šå‘å±•è€Œæ¥çš„ï¼Œå› è€Œå…·æœ‰æ˜“äºä½¿ç”¨ã€ä¼¸ç¼©æ€§å¼ºç­‰ä¼˜ç‚¹ã€‚
Spring Data JPA æ˜¯ Spring åŸºäº Spring Data æ¡†æ¶ã€åœ¨JPA è§„èŒƒçš„åŸºç¡€ä¸Šå¼€å‘çš„ä¸€ä¸ªæ¡†æ¶ï¼Œä½¿ç”¨ Spring Data JPA å¯ä»¥æå¤§åœ°ç®€åŒ–JPA çš„å†™æ³•ï¼Œå¯ä»¥åœ¨å‡ ä¹ä¸ç”¨å†™å®ç°çš„æƒ…å†µä¸‹å®ç°å¯¹æ•°æ®åº“çš„è®¿é—®å’Œæ“ä½œï¼Œé™¤äº†CRUDå¤–ï¼Œè¿˜åŒ…æ‹¬åˆ†é¡µå’Œæ’åºç­‰ä¸€äº›å¸¸ç”¨çš„åŠŸèƒ½ã€‚</p> <div><h2>æ¬¢è¿æ¥è®¿</h2> <ul><li>æœ‰é—®é¢˜æ¬¢è¿ç•™è¨€æˆ–åŠ äº¤æµqq:825121848</li> <li>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„</li> <li>è¯·å°ç¼–å–èŒ¶~<br><img src="/assets/img/wx.dc92fb1a.png"></li></ul></div> <!----></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/experience/rsyncforwindows.html" class="prev">
          rsyncåœ¨windowsä¸‹åº”ç”¨å…è´¹ç‰ˆ
        </a></span> <span class="next"><a href="/etd/java/passbyvalue.html">
          å…³äºjavaä¸­åªæœ‰å€¼ä¼ é€’çš„æ€è€ƒ
        </a>
        â†’
      </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.2dabfd5d.js" defer></script><script src="/assets/js/2.00c0ffb2.js" defer></script><script src="/assets/js/4.7b0110c2.js" defer></script><script src="/assets/js/19.8e3af826.js" defer></script>
  </body>
</html>
